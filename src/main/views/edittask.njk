{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/panel/macro.njk" import govukPanel %}
{% from "govuk/components/tag/macro.njk" import govukTag %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/fieldset/macro.njk" import govukFieldset %}
{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/textarea/macro.njk" import govukTextarea %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}

{% extends "template.njk" %}

<!-- You may want to make further use of these components: https://design-system.service.gov.uk/components/
but ultimately it is up to you -->

{% block content %}

  {% call govukFieldset({
    legend: {
      text: "New Task",
      classes: "govuk-fieldset__legend--l",
      isPageHeading: true
    }
  }) %}
  <form action="#" method="post" novalidate>
  {{ govukInput({
    label: {
      text: "Title"
    },
    id: "title",
    name: "title",
    value: task.title
  }) }}
  {{ govukTextarea({
    name: "description",
    id: "description",
    label: {
      text: "Description (optional)"
    },
    value: task.description
  }) }}
  {% if task is defined %}
  <input type="hidden" name="id" value="{{ task.id }}">
  <input type="hidden" name="status" value="{{ task.status }}">
  <input type="hidden" name="dueDate" value="{{ task.dueDate }}">
  <div class="govuk-button-group">
    {{ govukButton({
      text: "Save Task",
      element: "input",
      preventDoubleClick: true
    }) }}
    <a class="govuk-link" href="/status">Cancel</a>
  </div>
  {% endif %}
  {% if task is not defined %}

  {{ govukSelect({
    id: "status",
    name: "status",
    label: {
      text: "Current status"
    },
    items: [
        {
          value: "choose",
          text: "Choose status",
          selected: true
        },
        {
          value: "scheduled",
          text: "Scheduled"
        },
        {
          value: "not_started",
          text: "Not Started"
        },
        {
          value: "in_progress",
          text: "In Progress"
        },
        {
          value: "completed",
          text: "Completed"
        }
      ]
  }) }}
  {{ govukDateInput({
    id: "dueDate",
    namePrefix: "dueDate",
    fieldset: {
      legend: {
        text: "When is the task due?"
      }
    },
    hint: {
      text: "For example, 20 12 2027"
    }
  }) }}
  <div class="govuk-button-group">
    {{ govukButton({
      text: "Create Task",
      element: "input",
      preventDoubleClick: true
    }) }}
    <a class="govuk-link" href="/status">Cancel</a>
  </div>
  {% endif %}
  </form>
  {% endcall %}
{% endblock %}
